{{ 'swiper-bundle.min.css' | asset_url | stylesheet_tag }}
<style>
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
      #shopify-section-{{ section.id }} {
      {%- if section.settings.background_image != blank -%}
        --background-image: url({{ section.settings.background_image | img_url: '3840x4855' }});
         background-image: var(--background-image);
          background-repeat: repeat;
         background-size: 100% 100%;
      {%- endif -%}
    }
      @media screen and (max-width: 992px){
        #shopify-section-{{ section.id }} {
      {%- if section.settings.background_image_mobile != blank -%}
        --background-image: url({{ section.settings.background_image_mobile | img_url: '750x1230' }});
         background-image: var(--background-image);
          background-repeat: repeat;
         background-size: 100% 100%;
      {%- else -%}
        background-image: none;
          background-repeat: repeat;
         background-size: auto;
      {%- endif -%}
        }
    }
    .product-diy{
      padding-top: 68px;
      /* background: #000; */
    }

    .product-diy .product-diy-cont{
      display: flex;
      align-items: center;
    }

    .product-diy .product-diy-img,.product-diy .product-diy-text{
      width: 50%;
    }
    .product-diy .product-diy-img{
      overflow: hidden;
    }
    .product-diy .img-list{
      display: flex;
    }
    .product-diy .img-item{
      width: 100%;
      flex-shrink: 0;
    }
    .product-diy .img-item img{
      display: block;
      width: 100%;
    }
    .product-diy .product-diy-text{
      padding-left: 116px;
    }
    .product-diy .product-text-title{
      font-size: 44px;
      line-height: 1.25;
      font-family: var(--heading-font-family);
    }

    .product-diy .product-text-d{
      font-size: 16px;
      line-height: 1.5;
      margin-top: 10px;
    }

    .product-diy .product-text-icon{
      display: flex;
      justify-content: flex-start;
      margin-top: 30px;
    }

    .product-diy .product-text-icon-item{
      text-align: center;
      font-size: 14px;
      line-height: 1.5;
      margin-right: 20px;
    }
    .product-diy .product-text-icon-item span{
      font-family: var(--heading-font-family);
    }

    .product-diy .product-text-icon-item img{
      display: block;
      width: 70px;
      margin: 0 auto;
      margin-bottom: 5px;
    }

    .product-diy .product-text-icon-text-span{
      font-size: 12px;
      line-height: 1.5;
      display: none;
    }

    .product-diy .product-text-icon-item:last-child{
      margin-right: 0;
    }

    .product-diy .product-diy-spec{
      display: flex;
      align-items: center;
      margin-top: 25px;
      font-size: 16px;
      font-weight: 500;
      line-height: 1.5;
      margin-top: 30px;
    }

    .product-diy .product-diy-color-item{
      width: 35px;
      height: 35px;
      border-radius: 50%;
      position: relative;
      border: 1px solid #fff;
      margin-left: 12px;
      --bg-color:#fff;
      cursor: pointer;
    }
  .product_chrs.product-diy .product-diy-color-item{
      border: 1px solid #ddd;
    }
    .product-diy .product-diy-color-item::before{
      position: absolute;
      content: '';
      display: block;
      width: calc(100% - 5px);
      height: calc(100% - 5px);
      border-radius: 50%;
      background: var(--bg-color);
      top: 50%;
      left: 50%;
      transform: translate(-50%,-50%);
      border: 1px solid #FCFCFC;
    }

    .product-diy .product-diy-color-item.active{
      border-color: #000000;
    }

    .product-diy .product-diy-plug-txt{
      font-size: 16px;
      line-height: 1.5;
      letter-spacing: -0.28px;
      margin-top: 10px;
    }

    .product-diy .product-diy-label-item{
      display: flex;
      align-items: center;
      justify-content: center;
      width: 120px;
      height: 34px;
      font-size: 14px;
      line-height: 1.5;
      border: 1px solid #000000;
      margin-left: 10px;
      cursor: pointer;
    }

    .product-diy .product-diy-label-item.active{
      border-width: 2px;
    }

    .product-diy .product-diy-price{
      display: flex;
      align-items: center;
      font-size: 30px;
      line-height: 1.3;
      letter-spacing: -0.28px;
      margin-top: 30px;
    }

    .product-diy .product-diy-price .n-price{
      font-family: var(--heading-font-family);
    }

    .product-diy .product-diy-price .d-price{
      color: #D8D8D8;
      font-size: 20px;
      line-height: 1.2;
      letter-spacing: -0.28px;
      text-decoration: line-through;
      margin-left: 10px;
    }

    .product-diy .product-diy-gift{
      padding: 16px 0;
      display: flex;
      align-items: center;
      border-top: 1px solid rgba(119, 119, 119, 0.5);
      border-bottom: 1px solid rgba(119, 119, 119, 0.5);
      margin-top: 30px;
    }

    .product-diy .product-diy-gift label{
      position: relative;
    }

    .product-diy .product-gift-input{
      position: absolute;
      top: 0;
      left: 0;
      opacity: 0;
      /* pointer-events: none; */
    }

    .product-diy .checkbox-span{
     width: 18px;
      height: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid #000;
      border-radius: 2px;
    }

    .product-diy .checkbox-span svg{
      display: block;
      opacity: 0;
      pointer-events: none;
    }

    .product-diy .product-gift-input:checked +.checkbox-span svg{
      opacity: 1;
    }

    .product-diy .product-diy-gift-text{
      flex: 1;
      margin-left: 15px;
    }

    .product-diy .gift-icon{
      display: block;
      width: 42px;
      margin-left: 15px;
    }

    .product-diy .product-diy-gift-t{
      font-size: 16px;
      line-height: 1.5;
      font-family: var(--heading-font-family);
    }

    .product-diy .product-diy-gift-p{
      font-size: 16px;
      line-height: 1.5;
    }

    .product-diy .product-diy-btn{
      display: flex;
    }

    .product-diy .product-diy-btn-item{
      width: 224px;
      height: 46px;
      display: flex;
      justify-content: center;
      align-items: center;
      border: 1px solid #eee;
      background: #000;
      font-size: 14px;
      letter-spacing: 1.4px;
      margin-top: 29px;
      cursor: pointer;
      margin-right: 10px;
      color: #fff;
    }

    .product-diy .white-btn{
      border: 1px solid #000;
      background-color: #fff;
      margin-right: 0;

    }

    .product_chrs.product-diy .white-btn{
      background-color: #000;
      color: #fff;
    }

    .product-diy .product-diy-copy{
      display: flex;
      align-items:center;
      color: #8F8F8F;
      font-size: 16px;
      line-height: 1.5;
      letter-spacing: -0.28px;
      margin-top: 15px;
    }

    .product-diy .product-diy-copy-btn{
      font-size: 16px;
      letter-spacing: -0.28px;
      text-decoration: underline;
      margin-right: 5px;
      font-family: var(--heading-font-family);
      cursor: pointer;
      margin-left:10px;
      color: #000000;
    }

    .product-diy .product-diy-copy svg{
      display: block;
      margin-left: 10px;
      width: 50px;
    }

    .video_dialog-product {
      position: relative;
      margin-top: 20px;
      border-radius: 20px;
  }
  .video_dialog-product .popu-video {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1;
      display: inline-flex;
      cursor: pointer;
  }
  .video_dialog-product img{
    border-radius: 15px;
  }
  .ipl_check-item{
    background: #F5F5F5;
    padding: 0px 16px;
    margin-top: 40px;
  }
  .ipl_check-header{
    display: flex;
    justify-content: space-between;
    padding: 20px 0;
    color: #333;
  font-size: 22px;
  font-style: normal;
  font-weight: 400;
  line-height: 150%;
  text-transform: capitalize;
  align-items: center;
  cursor: pointer;
  }
  .ipl_check-content{
    display: none;
  }

  .ipl_check-list:first-child .ipl_check-content{
    display: block;
  }
  .ipl_check-list:last-child {
    border-top: 1px solid rgba(119, 119, 119, 0.5)
  }
  .ipl_check-list {
      /* padding-bottom: 20px; */
  }
  .ipl_check-content .txt{
    color: #333;
  font-size: 16px;
  font-style: normal;
  font-weight: 400;
  line-height: 150%;
  margin-bottom: 12px;
  }
  .ipl_check-content .tlt{
    color: #AEAEAE;
    font-size: 18px;
    font-style: normal;
    font-weight: 500;
    line-height: 150%;
    margin-bottom: 20px;
  }
  .ipl_check-list .procust-results__link{
    margin-top: 20px;
    margin-bottom: 20px;
  }
  .ipl_check-list .procust-results__link a{
    font-size: 15px;
    text-decoration-line: underline;
    text-transform: capitalize;
    color: #2BA8E7;
  }

  .ipl_check-list.is-active .animated-plus:before, .ipl_check-list.is-active .animated-plus:after {
      transform: translate(-50%,-50%) rotate(90deg);
  }
  .ipl_check-list.is-active .animated-plus:before {
      opacity: 0;
  }
  .ipl_check-nav {
      display: flex;
      padding: 20px 0;
      gap: 10px;
      justify-content: space-around;
     transform: translateX(41%);
    transition: all 0.3s;
    align-items: center;
  }
  .ipl_check-nav .ipl_check-lab{
    color: #000;
    text-align: center;
    font-size: 20px;
    font-style: normal;
    font-weight:300;
    line-height: 150%;
    cursor: pointer;
  }
  .ipl_check-nav .ipl_check-lab.active{
    font-weight:700;
  }
  .product_chrs.product-diy .product-diy-img {
    flex-basis: 55%;
    width: 40%;
  }
  .product_chrs.product-diy .product-diy-text {
    flex-basis: 45%;
    padding-left: 93px;
    width: 40%;
  }
  .next_prev-box svg.swiper-button-disabled{
    color: #DEDEDE;
  }
    .scroll_ft {
      overflow: hidden;
  }
    .product-diy-span{
      line-height: 1.5;
      font-family: var(--heading-font-family);
    }
    .product_chrs .check_coupon{
          padding-bottom: 20px;
    }
    .fx{
      display:flex;
    }
    .product_chrs .product-diy-dot{
        display: none;
        align-items: center;
        justify-content: center;
    }
     .product_chrs .product-diy-dot .product-diy-dot-item{
        width:6px;
        height: 6px;
        background: #aaa;
        margin: 0 6px;
    }
    .product_chrs .product-diy-dot .product-diy-dot-item.active{
        background: #000;
    }
    @media (max-width:1500px) {
      .product-diy .product-text-title{
        font-size: 38px;
      }
      .product-diy .product-text-d{
        margin-top: 5px;
      }
      .product-diy .product-diy-text{
        padding-left: 60px;
      }
    }

    @media (max-width:991px) {
      .product-diy .product-diy-cont{
        display: block;
      }
      .product-diy .product-diy-img, .product-diy .product-diy-text{
        width: 100%;
      }
      .product-diy .product-diy-text{
        padding-left: 0;
        margin-top: 40px;
      }
      .product-diy{
        --container-gutter:20px;
      }

      .product-diy .product-diy-img, .product_chrs.product-diy .product-diy-img{
        margin-left: calc(0px - var(--container-gutter));
        width: calc(100% + var(--container-gutter) + var(--container-gutter));
      }
      .product_chrs.product-diy .product-diy-text {
        padding-left: 0;
        width: 100%;
      }
      .product-diy .product-diy-img{
        display:flex;
      }
      .product-diy .img-list{
        flex-shrink: 0;
      }
      .product-diy .img-item{
        width:100vw;
      }
      .product-diy .video_dialog-product{
        margin-top: 0px;
        border-radius: 0px;
        flex-shrink: 0;
        width: 100vw;
      }
       .product_chrs .product-diy-dot{
         display:flex;
         margin-top:25px;
       }
    }

    @media (max-width:640px) {
      .product-diy{
        padding-top: 0;
      }
      .product-diy .product-text-title{
        font-size: 28px;
      }
      .product-diy .product-text-d{
        font-size: 14px;
      }
      .product-diy .product-text-icon{
        display: block;
        margin-top: 20px;
      }

      .product-diy .product-text-icon-item{
        margin-right: 0;
        font-size: 16px;
        text-align: left;
        display: flex;
        align-items: center;
        margin-bottom: 15px;
      }

      .product-diy .product-text-icon-item img{
        flex-shrink: 0;
      }

      .product-diy .product-text-icon-text{
        flex: 1;
        margin-left: 20px;
      }

      .product-diy .product-text-icon-text-span{
        display: block;
      }
      .product-diy .product-text-icon-item:last-child{
        margin-bottom: 0;
      }

      .product-diy .product-diy-color-item{
        width: 42px;
        height: 42px;
      }

      .product-diy .product-diy-spec{
        margin-top: 20px;
        font-size: 14px;
      }

      .product-diy .product-diy-plug-txt{
        font-size: 14px;
      }

      .product-diy .product-diy-gift-p{
        font-size: 12px;
      }

      .product-diy .product-diy-gift{
        padding: 10px 0;
        margin-top: 20px;
      }

      .product-diy .product-diy-label-item{
        width: 95px;
      }

      .product-diy .product-diy-price{
        margin-top: 20px;
        font-size: 24px;
      }

      .product-diy .product-diy-price .n-price{
        color: #E0004D;
      }

      .product-diy .product-diy-price .d-price{
        font-size: 16px;
      }

      .product-diy .product-diy-btn{
        margin-top: 10px;
        display: block;
      }

      .product-diy .product-diy-btn-item{
        width: 100%;
        height: 50px;
        margin: 0;
        border: 1px solid #000;
        background: #eee;
        color: #000;
      }

      .product-diy .white-btn{
        margin-top: 10px;
        border: 1px solid #eee;
        background: #000;

      }

      .product-diy .product-diy-copy{
        font-size: 12px;
        margin-top: 10px;
        color: #9B9B9B;
      }

      .product-diy .product-diy-copy-btn{
        color: #E0004D;
      }
      .product-diy .product-diy-copy svg{
        width: 42px;
      }
      .ipl_check-nav .ipl_check-lab{
        font-size: 12px;
      }
      .ipl_check-nav .ipl_check-lab.active {
         font-size: 16px;
      font-weight: 700;
  }
    }

    @media screen and (max-width: 768px){
      .section-{{ section.id }}-padding {
        padding-top: calc({{ section.settings.padding_top }}px * 0.6);
        padding-bottom: calc({{ section.settings.padding_bottom }}px * 0.6);
      }
      .video_dialog-product img {
      border-radius: 0;
  }
    }
</style>
{%- assign product = section.settings.product -%}
{% capture inventory_info %}
  {% for variant in product.variants %}
    color: {{ variant.option1 }},spe: {{ variant.option2 }},quan: {{ variant.inventory_quantity }}
  {% endfor %}
{% endcapture %}

<section class="section-box section-{{ section.id }}-padding">
  <div class="product-diy product_chrs">
    <div class="container">
      <div class="product-diy-cont">
        <div class="product-diy-img">
          <div class="img-list">
            {%- if section.settings.image != blank -%}
              <div class="img-item">
                <img
                  loading="lazy"
                  width="{{ section.settings.image.width }}"
                  height="{{ section.settings.image.height }}"
                  {% render 'image-attributes', image: section.settings.image %}
                  alt="{{ section.settings.image.alt | escape }}"
                  class="{% if section.settings.image_mobile != blank %}hidden-pocket{% endif %}"
                >
                {%- if section.settings.image_mobile != blank -%}
                  <img
                    loading="lazy"
                    width="{{ section.settings.image_mobile.width }}"
                    height="{{ section.settings.image_mobile.height }}"
                    {% render 'image-attributes', image: section.settings.image_mobile %}
                    alt="{{ section.settings.image_mobile.alt | escape }}"
                    class="hidden-lap-and-up"
                  >
                {%- endif -%}
              </div>
            {%- endif -%}
            {%- if section.settings.image1 != blank -%}
              <div class="img-item">
                <img
                  loading="lazy"
                  width="{{ section.settings.image1.width }}"
                  height="{{ section.settings.image1.height }}"
                  {% render 'image-attributes', image: section.settings.image1 %}
                  alt="{{ section.settings.image1.alt | escape }}"
                  class="{% if section.settings.image1_mobile != blank %}hidden-pocket{% endif %}"
                >
                {%- if section.settings.image1_mobile != blank -%}
                  <img
                    loading="lazy"
                    width="{{ section.settings.image1_mobile.width }}"
                    height="{{ section.settings.image1_mobile.height }}"
                    {% render 'image-attributes', image: section.settings.image1_mobile %}
                    alt="{{ section.settings.image1_mobile.alt | escape }}"
                    class="hidden-lap-and-up"
                  >
                {%- endif -%}
              </div>
            {%- endif -%}
          </div>
          {%- if section.settings.video_image != blank -%}
            <div class="video_dialog-product hidden-pocket">
              <div class="popu-video" href="{{ section.settings.video_link }}">
                <svg xmlns="http://www.w3.org/2000/svg" width="79" height="79" viewBox="0 0 79 79" fill="none">
                  <g filter="url(#filter0_b_2446_164)">
                    <circle cx="39.2188" cy="39.2188" r="39.2188" fill="white" fill-opacity="0.4"/>
                  </g>
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M52.3003 36.6445C54.2459 37.8091 54.2459 40.6281 52.3003 41.7927L34.9336 52.1881C32.9339 53.385 30.3927 51.9445 30.3927 49.614L30.3927 28.8233C30.3927 26.4928 32.9339 25.0522 34.9335 26.2492L52.3003 36.6445Z" fill="white"/>
                  <defs>
                    <filter id="filter0_b_2446_164" x="-21.7463" y="-21.7463" width="121.93" height="121.93" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                      <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                      <feGaussianBlur in="BackgroundImageFix" stdDeviation="10.8731"/>
                      <feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_2446_164"/>
                      <feBlend mode="normal" in="SourceGraphic" in2="effect1_backgroundBlur_2446_164" result="shape"/>
                    </filter>
                  </defs>
                </svg>
              </div>
              {%- if section.settings.video_image != blank -%}
                <img
                  width="{{ section.settings.video_image.width }}"
                  height="{{ section.settings.video_image.height }}"
                  {% render 'image-attributes', image: section.settings.video_image %}
                  alt="{{ section.settings.video_image.alt | escape }}"
                >
              {%- endif -%}
            </div>
          {%- endif -%}

          {%- if section.settings.video_image_mobile != blank -%}
            <div class="video_dialog-product hidden-lap-and-up">
              <div class="popu-video" href="{{ section.settings.video_link }}">
                <svg xmlns="http://www.w3.org/2000/svg" width="79" height="79" viewBox="0 0 79 79" fill="none">
                  <g filter="url(#filter0_b_2446_164)">
                    <circle cx="39.2188" cy="39.2188" r="39.2188" fill="white" fill-opacity="0.4"/>
                  </g>
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M52.3003 36.6445C54.2459 37.8091 54.2459 40.6281 52.3003 41.7927L34.9336 52.1881C32.9339 53.385 30.3927 51.9445 30.3927 49.614L30.3927 28.8233C30.3927 26.4928 32.9339 25.0522 34.9335 26.2492L52.3003 36.6445Z" fill="white"/>
                  <defs>
                    <filter id="filter0_b_2446_164" x="-21.7463" y="-21.7463" width="121.93" height="121.93" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                      <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                      <feGaussianBlur in="BackgroundImageFix" stdDeviation="10.8731"/>
                      <feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_2446_164"/>
                      <feBlend mode="normal" in="SourceGraphic" in2="effect1_backgroundBlur_2446_164" result="shape"/>
                    </filter>
                  </defs>
                </svg>
              </div>
              {%- if section.settings.video_image_mobile != blank -%}
                <img
                  width="{{ section.settings.video_image_mobile.width }}"
                  height="{{ section.settings.video_image_mobile.height }}"
                  {% render 'image-attributes', image: section.settings.video_image_mobile %}
                  alt="{{ section.settings.video_image_mobile.alt | escape }}"
                >
              {%- endif -%}
            </div>
          {%- endif -%}
        </div>
        <div class="product-diy-dot">
          <div class="product-diy-dot-item active"></div>
          <div class="product-diy-dot-item"></div>
          <div class="product-diy-dot-item"></div>
        </div>
        <div
          class="product-diy-text"
          data-id="{{ section.settings.product_id_1 }},{{ section.settings.product_id_2 }},{{ section.settings.product_id_3 }},{{ section.settings.product_id_4 }}"
        >
          <div class="product-text-title">{{ section.settings.text }}</div>
          <div class="product-text-d">{{ section.settings.text1 }}</div>
          <div class="product-text-icon">
            <div class="product-text-icon-item">
              {%- if section.settings.image2 != blank -%}
                <img
                  loading="lazy"
                  width="{{ section.settings.image2.width }}"
                  height="{{ section.settings.image2.height }}"
                  {% render 'image-attributes', image: section.settings.image2 %}
                  alt="{{ section.settings.image2.alt | escape }}"
                >
              {%- endif -%}
              <div class="product-text-icon-text">
                <span>{{ section.settings.text3 }}</span>
                <div class="product-text-icon-text-span">
                  {{ section.settings.text4 }}
                </div>
              </div>
            </div>
            <div class="product-text-icon-item">
              {%- if section.settings.image3 != blank -%}
                <img
                  loading="lazy"
                  width="{{ section.settings.image3.width }}"
                  height="{{ section.settings.image3.height }}"
                  {% render 'image-attributes', image: section.settings.image3 %}
                  alt="{{ section.settings.image3.alt | escape }}"
                >
              {%- endif -%}
              <div class="product-text-icon-text">
                <span>{{ section.settings.text5 }}</span>
                <div class="product-text-icon-text-span">
                  {{ section.settings.text6 }}
                </div>
              </div>
            </div>
            <div class="product-text-icon-item">
              {%- if section.settings.image4 != blank -%}
                <img
                  loading="lazy"
                  width="{{ section.settings.image4.width }}"
                  height="{{ section.settings.image4.height }}"
                  {% render 'image-attributes', image: section.settings.image4 %}
                  alt="{{ section.settings.image4.alt | escape }}"
                >
              {%- endif -%}
              <div class="product-text-icon-text">
                <span>{{ section.settings.text7 }}</span>
                <div class="product-text-icon-text-span">
                  {{ section.settings.text8 }}
                </div>
              </div>
            </div>
            <div class="product-text-icon-item">
              {%- if section.settings.image5 != blank -%}
                <img
                  loading="lazy"
                  width="{{ section.settings.image5.width }}"
                  height="{{ section.settings.image5.height }}"
                  {% render 'image-attributes', image: section.settings.image5 %}
                  alt="{{ section.settings.image5.alt | escape }}"
                >
              {%- endif -%}
              <div class="product-text-icon-text">
                <span>{{ section.settings.text9 }}</span>
                <div class="product-text-icon-text-span">
                  {{ section.settings.text10 }}
                </div>
              </div>
            </div>
          </div>
          <div class="product-diy-spec">
            <span class="product-diy-span">{{ section.settings.text11 }}</span>
            <div class="fx">
              {%- if section.settings.text12 != blank -%}
                <div class="product-diy-color-item active" style="--bg-color:{{ section.settings.text12 }};"></div>
              {%- endif -%}
              {%- if section.settings.text13 != blank -%}
                <div class="product-diy-color-item" style="--bg-color:{{ section.settings.text13 }};"></div>
              {%- endif -%}
            </div>
          </div>
          <div class="product-diy-plug-txt">{{ section.settings.text14 }}</div>
          <div class="product-diy-spec">
            <span class="product-diy-span">{{ section.settings.text15 }}</span>
            <div class="fx">
              {%- if section.settings.text16 != blank -%}
                <div class="product-diy-label-item active">{{ section.settings.text16 }}</div>
              {%- endif -%}
              {%- if section.settings.text17 != blank -%}
                <div class="product-diy-label-item">{{ section.settings.text17 }}</div>
              {%- endif -%}
            </div>
          </div>
          <div class="product-diy-gift XShop-Gifting">
            <label>
              <input type="checkbox" class="product-gift-input">
              <span class="checkbox-span">
                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="11" viewBox="0 0 12 11" fill="none">
                  <path d="M1.50024 6.5L5.00024 9.5L10.5002 1" stroke="black" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
              </span>
            </label>
            {%- if section.settings.image6 != blank -%}
              <img
                loading="lazy"
                class="gift-icon"
                width="{{ section.settings.image6.width }}"
                height="{{ section.settings.image6.height }}"
                {% render 'image-attributes', image: section.settings.image6 %}
                alt="{{ section.settings.image6.alt | escape }}"
              >
            {%- endif -%}
            <div class="product-diy-gift-text">
              <div class="product-diy-gift-t">{{ section.settings.text18 }}</div>
              <div class="product-diy-gift-p">{{ section.settings.text19 }}</div>
            </div>
          </div>
          <div class="product-diy-price">
            <span class="n-price">{{ section.settings.text20 }}</span>
            <span class="d-price XShop-Coupon">{{ section.settings.text21 }}</span>
            <div class="product-diy-copy-btn">
              {{ section.settings.text24 }}
            </div>
          </div>
          <div class="product-diy-btn" data-id="{{ section.settings.product_id_1 }}">
            {%- if section.settings.text22 != blank -%}
              <div class="product-diy-btn-item">{{ section.settings.text22 }}</div>
            {%- endif -%}
            {%- if section.settings.text23 != blank -%}
              <div class="product-diy-btn-item white-btn">{{ section.settings.text23 }}</div>
            {%- endif -%}
          </div>
          <div class="product-diy-copy">
            {{ section.settings.text25 }}
            <svg xmlns="http://www.w3.org/2000/svg" width="43" height="20" viewBox="0 0 43 20" fill="none">
              <rect width="42.75" height="20" rx="3" fill="#FFB3C7"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M8.59023 6.25H10.2764C10.2764 7.89664 9.64193 9.42856 8.51478 10.5676L10.8948 13.8563H8.76856L6.18168 10.2814L6.84926 9.77504C7.95695 8.93376 8.59023 7.64982 8.59023 6.25ZM31.5029 11.2247C31.5029 11.9733 32.1327 12.5781 32.9101 12.5781C33.6874 12.5781 34.3173 11.9733 34.3173 11.2247C34.3173 10.4784 33.6874 9.87239 32.9101 9.87239C32.1327 9.87239 31.5029 10.4784 31.5029 11.2247ZM34.3218 8.93261V8.59424H35.8765V13.8552H34.3218V13.5191C33.884 13.8216 33.3547 14 32.7832 14C31.2708 14 30.0454 12.7578 30.0454 11.2247C30.0454 9.69278 31.2708 8.4494 32.7832 8.4494C33.3547 8.4494 33.884 8.62901 34.3218 8.93261ZM4.25 13.8564H5.97612V6.25014H4.25V13.8564ZM13.0225 13.8541H11.3958V6.25014H13.0225V13.8541ZM27.2847 8.45332C26.6652 8.45332 26.0776 8.64916 25.6855 9.18799V8.59585H24.1389V13.8545H25.7038V11.0907C25.7038 10.2912 26.2331 9.89949 26.8709 9.89949C27.5522 9.89949 27.9455 10.312 27.9455 11.0803V13.8545H29.4967V10.509C29.4967 9.28649 28.5365 8.45332 27.2847 8.45332ZM15.1161 11.2247C15.1161 11.9733 15.7459 12.5781 16.5233 12.5781C17.3006 12.5781 17.9304 11.9733 17.9304 11.2247C17.9304 10.4784 17.3006 9.87239 16.5233 9.87239C15.7459 9.87239 15.1161 10.4784 15.1161 11.2247ZM17.935 8.93261V8.59424H19.4897V13.8552H17.935V13.5191C17.4972 13.8216 16.9679 14 16.3964 14C14.884 14 13.6586 12.7578 13.6586 11.2247C13.6586 9.69278 14.884 8.4494 16.3964 8.4494C16.9679 8.4494 17.4972 8.62901 17.935 8.93261ZM21.8918 9.28061V8.59577H20.3018V13.8543H21.8953V11.3989C21.8953 10.5704 22.7812 10.1253 23.395 10.1253H23.4145V8.59577C22.7835 8.59577 22.2028 8.8704 21.8918 9.28061ZM36.5498 12.9782C36.5498 12.4312 36.9865 11.9886 37.5249 11.9886C38.0633 11.9886 38.5 12.4312 38.5 12.9782C38.5 13.5228 38.0633 13.9655 37.5249 13.9655C36.9865 13.9655 36.5498 13.5228 36.5498 12.9782Z" fill="#17120F"/>
            </svg>
          </div>

          <div class="ipl_check-item">
            {%- for block in section.blocks -%}
              <div class="ipl_check-list{% if forloop.index == 1 %} is-active{% endif %}">
                <div class="ipl_check-header">
                  <span class="ipl_check-label">{{ block.settings.tab_title | escape }}</span>
                  <span class="animated-plus"></span>
                </div>
                <div class="ipl_check-content">
                  {%- if block.settings.tab_txt_1 != blank -%}
                    <p class="txt">{{ block.settings.tab_txt_1 | escape }}</p>
                  {%- endif -%}
                  {%- if block.settings.tab_txt_2 != blank -%}
                    <p class="tlt">{{ block.settings.tab_txt_2 | escape }}</p>
                  {%- endif -%}
                  {%- if block.settings.image_ip != blank -%}
                    <img
                      loading="lazy"
                      class=""
                      width="{{ block.settings.image_ip.width }}"
                      height="{{ block.settings.image_ip.height }}"
                      {% render 'image-attributes', image: block.settings.image_ip %}
                      alt="{{ block.settings.image_ip.alt | escape }}"
                    >
                  {%- endif -%}

                  {%- if block.settings.take_quiz != blank -%}
                    <div class="procust-results__link">
                      <a href="/pages/take-quiz" class="">
                        {{ block.settings.take_quiz | escape }}
                      </a>
                    </div>
                  {%- endif -%}

                  {%- if block.settings.tab_nav_2 != blank -%}
                    <div class="scroll_ft">
                      <div class="ipl_check-nav">
                        <div class="ipl_check-lab">{{ block.settings.tab_nav_1 | escape }}</div>
                        <div class="ipl_check-lab">{{ block.settings.tab_nav_2 | escape }}</div>
                        <div class="ipl_check-lab">{{ block.settings.tab_nav_3 | escape }}</div>
                        <div class="ipl_check-lab">{{ block.settings.tab_nav_4 | escape }}</div>
                      </div>
                    </div>
                    <div class="image_swiper-box">
                      <div class="swiper" id="image_swiper--{{ section.id}}">
                        <div class="swiper-wrapper">
                          {%- if block.settings.image_1 != blank -%}
                            <div class="swiper-slide">
                              {%- if block.settings.image_1 != blank -%}
                                <img
                                  loading="lazy"
                                  class=""
                                  width="{{ block.settings.image_1.width }}"
                                  height="{{ block.settings.image_1.height }}"
                                  {% render 'image-attributes', image: block.settings.image_1 %}
                                  alt="{{ block.settings.image_1.alt | escape }}"
                                >
                              {%- endif -%}
                            </div>
                          {%- endif -%}
                          {%- if block.settings.image_2 != blank -%}
                            <div class="swiper-slide">
                              {%- if block.settings.image_2 != blank -%}
                                <img
                                  loading="lazy"
                                  class=""
                                  width="{{ block.settings.image_2.width }}"
                                  height="{{ block.settings.image_2.height }}"
                                  {% render 'image-attributes', image: block.settings.image_2 %}
                                  alt="{{ block.settings.image_2.alt | escape }}"
                                >
                              {%- endif -%}
                            </div>
                          {%- endif -%}
                          {%- if block.settings.image_3 != blank -%}
                            <div class="swiper-slide">
                              {%- if block.settings.image_3 != blank -%}
                                <img
                                  loading="lazy"
                                  class=""
                                  width="{{ block.settings.image_3.width }}"
                                  height="{{ block.settings.image_3.height }}"
                                  {% render 'image-attributes', image: block.settings.image_3 %}
                                  alt="{{ block.settings.image_3.alt | escape }}"
                                >
                              {%- endif -%}
                            </div>
                          {%- endif -%}

                          {%- if block.settings.image_4 != blank -%}
                            <div class="swiper-slide">
                              {%- if block.settings.image_4 != blank -%}
                                <img
                                  loading="lazy"
                                  class=""
                                  width="{{ block.settings.image_4.width }}"
                                  height="{{ block.settings.image_4.height }}"
                                  {% render 'image-attributes', image: block.settings.image_4 %}
                                  alt="{{ block.settings.image_4.alt | escape }}"
                                >
                              {%- endif -%}
                            </div>
                          {%- endif -%}
                        </div>
                      </div>
                      <div class="check_coupon">
                        <div class="swiper-scrollbar" id="swiper-scrollbar--{{ section.id}}"></div>
                        <div class="next_prev-box">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="13"
                            height="22"
                            viewBox="0 0 13 22"
                            fill="none"
                            class="swiper-button-prev--{{ section.id}}"
                          >
                            <path d="M10.9717 1.99999L1.99998 10.9717L10.9717 19.9434" stroke="currentColor" stroke-width="2" stroke-linecap="square"/>
                          </svg>
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="13"
                            height="22"
                            viewBox="0 0 13 22"
                            fill="none"
                            class="swiper-button-next--{{ section.id}}"
                          >
                            <path d="M1.97169 1.99999L10.9434 10.9717L1.97169 19.9434" stroke="currentColor" stroke-width="2" stroke-linecap="square"/>
                          </svg>
                        </div>
                      </div>
                    </div>
                  {%- endif -%}
                </div>
              </div>
            {%- endfor -%}
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="{{ 'swiper-bundle.min.aio.min.js' | asset_url }}"></script>
  <script>
    window.addEventListener('load', function () {
      let current_code;
      $('.section-{{ section.id }}-padding .product-diy .product-diy-color-item').click(function () {
        let index = $(this).index();
        let $list = $(this).closest('.product-diy').find('.img-list');
        let width = $(this).closest('.product-diy').find('.product-diy-img')[0].offsetWidth;
        let $p = $(this).closest('.product-diy');
        $(this).addClass('active').siblings().removeClass('active');
        $('.section-{{ section.id }}-padding .product-diy-img').attr('data-index', index);
        if (window.innerWidth < 991) {
          $list.css({
            marginLeft: '-' + width * index + 'px',
            transition: 'all 1s cubic-bezier(0.645, 0.045, 0.355, 1) 0s',
          });
          $('.product-diy-dot-item').removeClass('active');
          $('.product-diy-dot-item').eq(index).addClass('active');
        } else {
          $list.css({
            transform: 'translateX(-' + width * index + 'px)',
            transition: 'all 1s cubic-bezier(0.645, 0.045, 0.355, 1) 0s',
          });
        }
        setProductId();
        if ($(this).index() != 0) {
          $p.find('.product-diy-plug-txt').hide();
        } else {
          $p.find('.product-diy-plug-txt').show();
        }
      });
      $('.section-{{ section.id }}-padding .product-diy .product-diy-label-item').click(function () {
        $(this).addClass('active').siblings().removeClass('active');
        setProductId();
      });

      function setProductId() {
        let $p = $('.section-{{ section.id }}-padding');
        let idList = $p
          .find('.product-diy-text')
          .attr('data-id')
          .split(',')
          .filter((item) => item);
        let colorIndex = $p.find('.product-diy-color-item.active').index();
        let labelIndex = $p.find('.product-diy-label-item.active').index();
        let pId = '';
        if (colorIndex == 0) {
          if (labelIndex == 0) {
            pId = idList[0];
          } else {
            pId = idList[1];
          }
        } else {
          if (labelIndex == 0) {
            pId = idList[2];
          } else {
            pId = idList[3];
          }
        }
        $p.find('.product-diy-btn').attr('data-id', pId);
      }

      $('.product-gift-input').change(function () {
        commonGtmEvent('A3_gifting', '', '');
      });

      $('.section-{{ section.id }}-padding .product-diy-btn-item').click(function () {
        let index = $(this).index();
        let id = $(this).parents('.product-diy-btn').attr('data-id');
        let giftParam = {};
        let checkGift = $('.product-gift-input').is(':checked');
        if (checkGift) {
          giftParam = { _gift: true };
        }
        if ($(this).hasClass('white-btn')) {
          // 新增扩展字段 是否礼品 _gift
          addToCart(id, null, giftParam);
          commonGtmEvent('A3_atc', 'click', '');
        } else {
          buyProduct(id, giftParam);
        }
      });

      function detectSwipe(name, callback) {
        let element = document.querySelector(name);
        let startX;

        element.addEventListener('touchstart', function (e) {
          startX = e.touches[0].clientX;
        });

        element.addEventListener('touchend', function (e) {
          const endX = e.changedTouches[0].clientX;
          const direction = getSwipeDirection(startX, endX);

          callback(direction);
        });

        function getSwipeDirection(startX, endX) {
          const threshold = 10;

          if (endX - startX > threshold) {
            return 0;
          } else if (startX - endX > threshold) {
            return 1;
          }

          return 'none';
        }
      }

      function changeItemP(num) {
        let $p = $('.product_chrs');
        let $sp = $p.find('.product-diy-img');
        let index = $sp.attr('data-index') || 0;
        let width = $sp[0].offsetWidth;
        let $list = $p.find('.img-list');
        if ((num == 0 && !index) || (num == 1 && index == 2)) return;
        if (num == 0) {
          index = index * 1 - 1;
        } else {
          index = index * 1 + 1;
        }
        $list.css({
          marginLeft: '-' + width * index + 'px',
          transition: 'all 1s cubic-bezier(0.645, 0.045, 0.355, 1) 0s',
        });
        $sp.attr('data-index', index);
        $('.product-diy-dot-item').removeClass('active');
        $('.product-diy-dot-item').eq(index).addClass('active');
      }

      if (window.innerWidth < 991) {
        detectSwipe('.section-{{ section.id }}-padding .product-diy-img', function (direction) {
          console.log('Swipe direction:', direction);
          changeItemP(direction);
        });
      }

      $('html').on('click', '.ipl_check-list .ipl_check-header', function () {
        let $this = $(this);
        $this.siblings('.ipl_check-content').slideToggle();
        $this
          .parents('.ipl_check-list')
          .toggleClass('is-active')
          .siblings('.ipl_check-list')
          .removeClass('is-active')
          .find('.ipl_check-content')
          .slideUp();
        commonGtmEvent('result_fold', 'click', '');
      });
      $('.section-{{ section.id }}-padding .procust-results__link').click(function () {
        commonGtmEvent('result_fold', 'click', '');
      });

      let imageswiper = new Swiper('#image_swiper--{{ section.id }}', {
        slidesPerView: 1,
        spaceBetween: 0,
        pagination: {
          el: '#swiper-scrollbar--{{ section.id}}',
          type: 'progressbar',
        },
        navigation: {
          nextEl: '.swiper-button-next--{{ section.id }}',
          prevEl: '.swiper-button-prev--{{ section.id }}',
        },
        on: {
          slideChange: function () {
            document.querySelectorAll('.ipl_check-lab').forEach(function (item) {
              item.classList.remove('active');
            });
            document.querySelectorAll('.ipl_check-lab')[this.activeIndex].classList.add('active');
            let tarx = this.activeIndex == 0 ? 40 : this.activeIndex == 1 ? 12 : this.activeIndex == 2 ? -21 : -44;
            console.log('tarx----', tarx);
            document.querySelector('.ipl_check-nav').style.transform = `translateX(${tarx}%)`;
          },
        },
      });

      $('html').on('click', '.ipl_check-item .ipl_check-lab', function () {
        let $this = $(this);
        imageswiper.slideTo($this.index(), 500);
        let ckx = $this.index() == 0 ? 40 : $this.index() == 1 ? 12 : $this.index() == 2 ? -21 : -44;
        console.log('ckx----', ckx);
        document.querySelector('.ipl_check-nav').style.transform = `translateX(${ckx}%)`;
        $this.siblings('.ipl_check-lab').removeClass('active');
        $this.addClass('active');
      });
      document.querySelectorAll('.ipl_check-lab')[0].classList.add('active');

      fetch('https://api.myulike.com/api/order-coupon-use?site=uk')
        .then((response) => {
          // 检查是否请求成功 (状态码为 200-299)
          if (!response.ok) {
            throw new Error(`Network response was not ok: ${response.status}`);
          }
          // 将响应解析为 JSON
          return response.json();
        })
        .then((data) => {
          // 处理获取的数据
          const couponData = data.data.map((item, index, array) => ({
            ...item,
            index: index,
          }));

          const selectData = couponData.filter((item, index) => {
            if (
              item.usage_count === 0 &&
              index > 0 &&
              couponData[index - 1].number - couponData[index - 1].usage_count === 0
            ) {
              return { ...item, index };
            } else if (item.usage_count !== 0 && item.number > item.usage_count) {
              return { ...item, index };
            } else if (item.usage_count === 0 && index === 0) {
              return { ...item, index };
            }
            return false;
          });

          selectData.forEach((item) => {
            document.querySelector('.section-{{ section.id }}-padding .product-diy-price .n-price').innerHTML =
              item.currency + item.air3.discount_price;
            document.querySelector('.section-{{ section.id }}-padding .product-diy-price .d-price').innerHTML =
              item.currency + item.air3.price;
            current_code = item.code;
          });
        })
        .catch((error) => {
          // 处理错误
          console.error('Error during fetch operation:', error);
        });

      document
        .querySelector('.section-{{ section.id }}-padding .product-diy-copy-btn')
        .addEventListener('click', function () {
          copyCode(current_code, `Copy Code`, this);
          commonGtmEvent('A3_copy', 'click', '');
        });
    });
  </script>
</section>
{% schema %}
{
  "name": "Product Christmas",
  "blocks": [
    {
      "name": "Column",
      "type": "item",
      "settings": [
        {
          "type": "text",
          "id": "tab_title",
          "label": "Tab Heading",
          "default": "IPL vs. Salon"
        },

        {
          "type": "text",
          "id": "tab_txt_1",
          "label": "Tab Txt 1"
        },
        {
          "type": "text",
          "id": "tab_txt_2",
          "label": "Tab Txt 2"
        },

        {
          "type": "image_picker",
          "id": "image_ip",
          "label": "Image Ipl"
        },

        {
          "type": "text",
          "id": "take_quiz",
          "label": "Take Quiz"
        },

        {
          "type": "text",
          "id": "tab_nav_1",
          "label": "Tab Nav 1"
        },
        {
          "type": "text",
          "id": "tab_nav_2",
          "label": "Tab Nav 2"
        },
        {
          "type": "text",
          "id": "tab_nav_3",
          "label": "Tab Nav 3"
        },
        {
          "type": "text",
          "id": "tab_nav_4",
          "label": "Tab Nav 4"
        },
        {
          "type": "image_picker",
          "id": "image_1",
          "label": "Image 1"
        },
        {
          "type": "image_picker",
          "id": "image_2",
          "label": "Image 2"
        },
        {
          "type": "image_picker",
          "id": "image_3",
          "label": "Image 3"
        },
        {
          "type": "image_picker",
          "id": "image_4",
          "label": "Image 4"
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image"
    },
    {
      "type": "image_picker",
      "id": "background_image_mobile",
      "label": "Background Image Mobile"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "image_picker",
      "id": "image1",
      "label": "Image"
    },
    {
      "type": "image_picker",
      "id": "image_mobile",
      "label": "Mobile Image"
    },
    {
      "type": "image_picker",
      "id": "image1_mobile",
      "label": "Mobile Image1"
    },
    {
      "type": "url",
      "id": "video_link",
      "label": "Video link"
    },
    {
      "type": "image_picker",
      "id": "video_image",
      "label": "Video Image"
    },
    {
      "type": "url",
      "id": "video_link_mobile",
      "label": "Mobile Video link"
    },
    {
      "type": "image_picker",
      "id": "video_image_mobile",
      "label": "Mobile Video Image"
    },
    {
      "type": "text",
      "id": "product_id_1",
      "label": "Product Id 1"
    },
    {
      "type": "text",
      "id": "product_id_2",
      "label": "Product Id 2"
    },
    {
      "type": "text",
      "id": "product_id_3",
      "label": "Product Id 3"
    },
    {
      "type": "text",
      "id": "product_id_4",
      "label": "Product Id 4"
    },
    {
      "type": "text",
      "id": "text",
      "label": "Text"
    },
    {
      "type": "text",
      "id": "text1",
      "label": "Text"
    },
    {
      "type": "image_picker",
      "id": "image2",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "text3",
      "label": "Text"
    },
    {
      "type": "text",
      "id": "text4",
      "label": "Text"
    },
    {
      "type": "image_picker",
      "id": "image3",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "text5",
      "label": "Text"
    },
    {
      "type": "text",
      "id": "text6",
      "label": "Text"
    },
    {
      "type": "image_picker",
      "id": "image4",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "text7",
      "label": "Text"
    },
    {
      "type": "text",
      "id": "text8",
      "label": "Text"
    },
    {
      "type": "image_picker",
      "id": "image5",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "text9",
      "label": "Text"
    },
    {
      "type": "text",
      "id": "text10",
      "label": "Text"
    },
    {
      "type": "text",
      "id": "text11",
      "label": "Text"
    },
    {
      "type": "text",
      "id": "text12",
      "label": "Color"
    },
    {
      "type": "text",
      "id": "text13",
      "label": "Color"
    },
    {
      "type": "text",
      "id": "text14",
      "label": "Text"
    },
    {
      "type": "text",
      "id": "text15",
      "label": "Text"
    },
    {
      "type": "text",
      "id": "text16",
      "label": "Text"
    },
    {
      "type": "text",
      "id": "text17",
      "label": "Text"
    },
    {
      "type": "image_picker",
      "id": "image6",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "text18",
      "label": "Text"
    },
    {
      "type": "text",
      "id": "text19",
      "label": "Text"
    },
    {
      "type": "text",
      "id": "text20",
      "label": "Price"
    },
    {
      "type": "text",
      "id": "text21",
      "label": "Discount Price"
    },
    {
      "type": "text",
      "id": "text22",
      "label": "Button text"
    },
    {
      "type": "text",
      "id": "text23",
      "label": "Button text"
    },
    {
      "type": "text",
      "id": "discount_code",
      "label": "Code"
    },
    {
      "type": "text",
      "id": "text24",
      "label": "Text"
    },
    {
      "type": "text",
      "id": "text25",
      "label": "Text"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 0
    }
  ],
  "presets": [
    {
      "name": "Product Christmas",
      "blocks": []
    }
  ]
}
{% endschema %}
