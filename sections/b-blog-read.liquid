{%- liquid
  assign se_id = section.id
  assign se_bks = section.blocks
  assign se_stts = section.settings
-%}
<style scoped>
  #blog-product-plugin-three .header__linklist-link {
    font-size: 1.6em;
  }
  #blog-product-plugin-three {
    display: none;
  }
  .blogReadHtml {
    font-size: 62.5%;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 2em 0;
  }
  .blogReadHtml .product-container {
    width: 100%;
    {% comment %} height: 16em; {% endcomment %}
    height: 250px;
    display: flex;
    justify-content: flex-start;
    align-items: center;
    box-sizing: border-box;
    background: url('https://cdn.shopify.com/s/files/1/0841/4596/3322/files/product_3_img_49ffb9c9-953d-4790-a36e-b099f554445f.png?v=1748948420') no-repeat center ;
    background-size: cover;
  }
  .blogReadHtml .subscribe-section {
    width: 400px;
    padding-left: 50px;
    {% comment %} width: 32em;
    padding-left: 5em; {% endcomment %}
  }
  .blogReadHtml .form-row {
    align-items: center;
    gap: 1.5em;
    margin-top: 1em;
    flex-wrap: wrap;
  }
  .blogReadHtml .subscribe-section .blogreade_title {
    color: #fff;
    font-family: Saans;
    font-size: 24px;
    font-style: normal;
    font-weight: 500;
    text-align: left;
    line-height: 1.2;
    margin-bottom: 0px;
  }
  .blogReadHtml .submit-btn {
    padding: 5px 15px;
    font-size: 14px;
    background-color: #e0004d;
    color: white;
    border: none;
    cursor: pointer;
    white-space: nowrap;
    box-sizing: border-box;
    text-decoration: none;
    border-radius: 4px;
  }
  .blogReadHtml .submit-btn:hover {
    background-color: #c30043;
  }
  .blogReadHtml .terms {
    color: #f9f6fa;
    font-family: Saans;
    font-size: 12px;
    font-style: normal;
    text-align: left;
    line-height: 1.5;
    margin: 15px 0;
  }
  .blogReadHtml .terms label {
    display: flex;
    align-items: flex-start;
    gap: 0.2em;
  }

  /* Responsive Styles */
  @media (max-width: 1200px) {
    .blogReadHtml {
      font-size: 56.25%;
    }
  }
  @media (max-width: 992px) {
    .blogReadHtml {
      font-size: 50%;
    }
  }
  @media (max-width: 768px) {
    .blogReadHtml {
      font-size: 43.75%;
    }
    .blogReadHtml .product-container {
       height:200px;
    }

    .blogReadHtml .subscribe-section {
      width: 340px;
      padding-left: 40px;
    }


    .blogReadHtml .subscribe-section .blogreade_title {
      width: 100%;
      line-height: 1.3;
      font-size: 14px;
    }

    .blogReadHtml .terms  {
        margin: 5px 0;
    }
  }

  @media (max-width: 768px) {
    .blogReadHtml {
      font-size: 43.75%;
    }
    .blogReadHtml .product-container {
       height:250px;
    }

    .blogReadHtml .subscribe-section {
      width: 350px;
      padding-left: 40px;
    }


    .blogReadHtml .subscribe-section .blogreade_title {
      width: 100%;
      line-height: 1.3;
      font-size: 18px;
    }

    .blogReadHtml .terms  {
        margin: 5px 0;
    }
  }


  @media (max-width: 680px) {

    .blogReadHtml .product-container {
       height:250px;
    }

    .blogReadHtml .subscribe-section {
      width: 310px;
      padding-left: 40px;
    }


    .blogReadHtml .subscribe-section .blogreade_title {
      width: 100%;
      line-height: 1.3;
      font-size: 14px;
    }

    .blogReadHtml .terms  {
        margin: 10px 0;
    }

    .blogReadHtml .submit-btn {
      font-size: 12px;
    }
  }


  @media (max-width: 480px) {
    .blogReadHtml .product-container {
        height:250px;
    }

    .blogReadHtml .subscribe-section {
      width: 208px;
      padding-left: 10px;
    }

    .blogReadHtml .subscribe-section .blogreade_title{
      width: 210px;
      font-size:16px;
    }

    .blogReadHtml .terms {
      margin: 15px 0;
      font-size: 12px;
    }

    .blogReadHtml .submit-btn {
      font-size: 12px;
      padding: 5px 10px;
    }
  }
</style>
{%- liquid
  assign se_id = section.id
  assign se_bks = section.blocks
  assign se_stts = section.settings
-%}

<div id="blog-product-plugin-three">
  <div class="blogReadHtml" data-sort="{{ se_stts.sort }}">
    <div class="product-container">
      <div class="subscribe-section">
        <div class="blogreade_title">{{ se_stts.title }}</div>

        <div class="terms">
          <label>
            <span>
              {{ se_stts.desc }}
            </span>
          </label>
        </div>
        <div class="form-row">
          <button class="submit-btn read-btn">{{ se_stts.btn_text }}</button>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  window.addEventListener("load", function () {
    const $template = $('#blog-product-plugin-three .blogReadHtml');
    const templateClass = "{{ se_stts.className }}"; // 动态 class 名（可选）

    $(`.${templateClass}`).each(function () {
      const $target = $(this);
      const sort = $target.data('sort');
      const $ipl = $(`.ipl-guide[data-sort="${sort}"]`);

      if ($ipl.length === 0) return;

      const title = $ipl.data('cta-title') || "{{ se_stts.title }}";
      const desc = $ipl.data('cta-subtitle') || "{{ se_stts.desc }}";
      const btnText = $ipl.data('cta-button-text') || "{{ se_stts.btn_text }}";
      const btnLink = $ipl.data('cta-button-link') || "{{ se_stts.btn_link }}";

      const $newBlock = $template.clone();
      $newBlock.attr('data-sort', sort);
      $newBlock.find('.blogreade_title').text(title);
      $newBlock.find('.terms span').text(desc);
      $newBlock.find('.read-btn').text(btnText).data('href', btnLink);

      $target.replaceWith($newBlock);
    });

    // ✅ 按钮点击跳转
    $(document).on('click', '.read-btn', function () {
      const url = $(this).data('href');
      if (url) {
        {% comment %} window.open(url, '_blank'); {% endcomment %}
        window.location.href=url
      }
    });
  });
</script>
{% schema %}
{
  "name": "b-blog-read",
  "class": "b-blog-read",
  "blocks": [
    {
      "name": "social-item",
      "type": "social-item",
      "settings": [
        {
          "type": "url",
          "id": "link",
          "label": "链接"
        },
        {
          "type": "html",
          "id": "svg",
          "label": "svg文本"
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "text",
      "id": "className",
      "label": "class名称"
    },
    {
      "type": "text",
      "id": "title",
      "label": "标题"
    },
    {
      "type": "text",
      "id": "desc",
      "label": "描述"
    },
    {
      "type": "text",
      "id": "btn_text",
      "label": "按钮名称",
      "default": "Read"
    },
    {
      "type": "text",
      "id": "btn_link",
      "label": "按钮跳转路径"
    }
  ],
  "presets": [
    {
      "name": "b-blog-read",
      "blocks": []
    }
  ]
}
{% endschema %}
