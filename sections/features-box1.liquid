<style>
@media (min-width:1600px) {
  .features-box .container{
    max-width: calc(100% - 40px);
  }
}
.features-box{
  position: relative;
  z-index: 2;
  --style-num:0;
  opacity: calc(1 - .5*var(--style-num));
}
.features-box .container{
  flex: 1;
  position: relative;
  z-index: 3;
}
.features-box .features-box-top{
  position: sticky;
  top: 80px;
}
.features-box .text-mark{
  position: sticky;
  top: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  height: calc(100vh - 80px);
  z-index: 0;
}
.features-box .text-mark-txt{
  font-size: 161px;
  color: transparent;
  max-width: 678px;
  text-align: center;
  line-height: 1.1;
  margin: 0 auto;
  background-clip: text;
  -webkit-background-clip: text;
  background-repeat: no-repeat;
  background-image: url({{ section.settings.image | image_url }});
  background-size:100% 200%;
  --position-num:0%;
  background-position: 0% var(--position-num);
}
.features-box .features-box-two{
  height: calc(100vh - 80px);
  width: 100%;
  position: absolute;
  top: 0;
  z-index: 1;
  overflow: hidden;
  --img-top:0;
}
.features-box .product-img{
  position: absolute;
  width: auto;
  height: 242.3%;
  max-width: none;
  z-index: 0;
  top: calc(100% - 120% * var(--img-top));
  right: 100%;
}

.features-box .features-box-two-tags{
  height: calc(100vh - 80px);
}

.features-box .features-box-step{
  display: flex;
  align-items: flex-end;
  color: #000;
  --ratio-num:0;
}

.features-box .features-box-step .features-box-text{
  position: relative;
  z-index: 1;
  margin-left: 52%;
}
.features-box .features-box-step .features-box-text::before{
  position: absolute;
  content: '';
  display: none;
  height: 1px;
  width: calc(30% * var(--ratio-num));
  background: #000;
  left: calc(-30% * var(--ratio-num) - 15px);
  top: 15%;
  transform: translateY(calc(30px - 30px * var(--ratio-num)));
  opacity: var(--ratio-num);
}

.features-box .features-box-two .svg-icon-box{
  position: absolute;
  left: 0%;
  top: -20px;
  transform: translate(-100%,calc(30px - 30px * var(--ratio-num)));
  opacity: var(--ratio-num);
}

.features-box .mb-box{
  display: none;
}

.features-box .features-box-two .container{
  display: flex;
  margin-bottom: 15%;
}

.features-box .features-box-step.show-text .features-box-text::before{
  width: 30%;
  transition-delay: 0s
}

.features-box .features-box-step.show-text .features-box-title{
  transform: translateY(0px);
  opacity: 1;
  transition-delay: 0.1s;
}
.features-box .features-box-step.show-text .features-box-sub{
  transform: translateY(0px);
  opacity: 1;
  transition-delay: 0.2s;
}

.features-box .features-box-two .features-box-text{
  max-width: 300px;
}

.features-box .features-box-title{
  font-size: 30px;
  line-height: 1.5;
  transform: translateY(calc(30px - 30px * var(--ratio-num)));
  opacity: var(--ratio-num);
}

.features-box .features-box-sub{
  font-size: 16px;
  line-height: 1.5;
  margin-top: 20px;
  transform: translateY(calc(30px - 30px * var(--ratio-num)));
  opacity: var(--ratio-num);
}
.features-box .features-box-sub p{
  margin: 0;
}

.features-box .features-box-sub strong{
  font-weight: normal;
  font-family: var(--heading-font-family);
}

.features-box .features-box-three{
  --height-num:0;
  height: calc(120vh - 80px);
  position: sticky;
  top: 80px;
  z-index: 2;
  clip-path: polygon(0% 0%, 100% 0%, 100% calc(83% - 83% * var(--height-num)), 0% calc(83% - 83% * var(--height-num)));
}
.features-box .features-box-three{
  align-items: center;
}

.features-box .features-box-three .features-box-text{
  max-width: 340px;
  margin-left: 19%;
}

.features-box .features-box-three .features-box-text::before{
  left: auto;
  right: calc(-30% * var(--ratio-num) - 15px);
  width: calc(30% * var(--ratio-num));
  top:22%;
}
.features-box .features-box-three .svg-icon-box{
  position: absolute;
  right: 0;
  top: -30px;
  transform: translate(100%,calc(30px - 30px * var(--ratio-num)));
  opacity: var(--ratio-num);
}
.features-box .features-box-four{
  height: 100vh;
  padding-top: 20vh;
  position: relative;
  z-index: -1;
  pointer-events: none;
}
.features-box .features-box-four-cont{
  color: #fff;
  background: linear-gradient(120deg, #535868 4.22%, #0C0C12 85.66%);
  height: 100%;
  transform-origin: top;
  transform: scale(calc(1 - .1* var(--style-num)));
  /* border-radius: 0 0 calc(var(--style-num) * 100px/(1 - 1 * var(--style-num))) calc(var(--style-num) * 100px/(1 - 1 * var(--style-num))); */
  overflow: hidden;
}

.features-box .features-box-four .features-box-text::before{
  display: none;
}

.features-box .features-box-four-ov .features-box-text{
  max-width: 340px;
}

.features-box .features-box-four-ov .svg-icon-box{
  position: absolute;
  right: 0;
  top: -30px;
  transform: translate(100%,calc(30px - 30px * var(--ratio-num)));
  opacity: var(--ratio-num);
}

.features-box .features-box-four-ov .container{
  justify-content: flex-start;
  margin-bottom: 15%;
}

.features-box .features-box-four-ov .features-box-text{
  margin-left: 15%;
}

.features-box .four-img{
  max-width: none;
  width: auto;
  height: 242.3%;
  position: absolute;
  top: calc(100% - 120% * var(--img-top));
  right: 0;
}

.features-box .features-box-four-ov{
  --height-num:0;
  height: 100%;
  width: 100%;
  position: absolute;
  top: 0;
  overflow: hidden;
  left: 0;
  clip-path: polygon(0% calc(100% - 100% * var(--height-num)), 100% calc(100% - 100% * var(--height-num)), 100% 100%, 0% 100%);
  z-index: 6;
}

@media (max-width:1920px) {
  .features-box .features-box-two .svg-icon-box{
    zoom: .8;
  }
  .features-box .features-box-two .container{
    margin-bottom: 10%;
  }
  .features-box .features-box-three .features-box-text{
    margin-left: 8%;
  }
  .features-box .features-box-four-ov .features-box-text{
    margin-left: 5%;
  }
  .features-box .features-box-four-ov .container{
    margin-bottom: 15%;
  }
}

@media (max-width:1600px) {
  .features-box .features-box-two .container{
    margin-bottom: 8%;
  }
  .features-box .features-box-three .features-box-text{
    margin-left: 3%;
  }
  .features-box .features-box-four-ov .container{
    margin-bottom: 13%;
  }
  .features-box .features-box-four-ov .features-box-text{
    margin-left: 2%;
  }
}

@media (max-width:1400px) {
  .features-box .features-box-step .features-box-text{
    margin-left: 52%;
  }
  .features-box .features-box-two .container{
    margin-bottom: 5%;
  }
  .features-box .features-box-three .features-box-text{
    margin-left: 0%;
  }
  .features-box .features-box-three .features-box-text{
    margin-top: 10%;
  }
  .features-box .features-box-four-ov .features-box-text{
    margin-left: 0%;
  }
  .features-box .features-box-four-ov .container{
    margin-bottom: 8%;
  }
}

@media (max-width:991px) {
  .features-box .text-mark-txt{
    font-size: 75px;
  }
  .features-box .product-img,.features-box .four-img{
    height: 196.67%;
  }
  .features-box .features-box-two .features-box-text{
    max-width:238px;
  }
  .features-box .features-box-title{
    font-size: 24px;
  }
  .features-box .features-box-sub{
    font-size: 12px;
    margin-top: 10px;
  }
  .features-box .mb-box{
    display: block;
  }
  
  .features-box .pc-box{
    display: none;
  }
  .features-box .features-box-three .features-box-text{
    max-width: 240px;
    margin-top: 35%;
  }
  .features-box .features-box-four-ov .features-box-text{
    max-width: 240px;
  }
  .features-box .features-box-two .container{
    justify-content: flex-end;
    margin-bottom: 44%;
  }
  .features-box .features-box-two .features-box-text{
    margin-left: 0;
  }
  .features-box .features-box-two .svg-icon-box{
    zoom: 1;
    left: 50px;
    top: -20px;
    transform: translateY(-100%);
  }
  
  .features-box .features-box-three .svg-icon-box{
    transform: translate(-100%,-100%);
    top: 0;
    right: 20%;
  }
  .features-box .features-box-four-ov .container{
    justify-content: flex-start;
    margin-bottom: 35%;
  }
}

@media (max-width:740px) {
  .features-box .features-box-top{
    top: 60px;
  }
  .features-box .text-mark{
    height: calc(100vh - 60px);
    top: 60px;
  }
  .features-box .features-box-two{
    height: calc(100vh - 60px);
  }
  .features-box .features-box-two-tags{
    height: calc(100vh - 60px);
  }
  .features-box .features-box-three{
    height: calc(120vh - 60px);
    top: 60px;
  }

}

.next-box{
  position: relative;
  z-index: 1;
}

.next-box-cont{
  position: sticky;
  top: 80px;
  --style-num:1;
  opacity: var(--style-num);
  transition: opacity .1s;
}	
</style>

<section>
  <div class="features-box">
    <div class="features-box-top">
      <div class="text-mark">
        <div class="container">
          <div class="text-mark-txt" style="--position-num:0%;">
            {{ section.settings.text }}
          </div>
        </div>
      </div>
      <div class="features-box-two features-box-step" style="">
        {%- if section.settings.image1 != blank -%}
          <img loading="lazy" class="product-img" width="{{ section.settings.image1.width }}" height="{{ section.settings.image1.height }}" {% render 'image-attributes', image: section.settings.image1 %} alt="{{ section.settings.image1.alt | escape }}" >
        {%- endif -%}
        <div class="container">
          <div class="features-box-text">
            <div class="svg-icon-box">
              <svg xmlns="http://www.w3.org/2000/svg" class="pc-box" width="217" height="50" viewBox="0 0 217 50" fill="none">
                <path d="M161 8H8.59424e-06" stroke="#3F3636"/>
                <path d="M208.559 49.387L160.211 2.00008" stroke="#3F3636"/>
                <path d="M150.007 -1.66755e-06L169.081 0L169.081 8.27197C169.079 8.74667 169.074 9.22231 169.053 9.69608C168.946 12.1404 168.234 14.1565 166.95 15.7556C165.961 16.9889 164.802 17.7707 163.556 18.2882C161.607 19.0971 159.618 19.2581 157.611 18.9035C156.329 18.6773 155.087 18.2175 153.92 17.4012C151.329 15.5889 149.976 12.6718 150 8.46371C150.026 3.76506 150.006 -1.66763e-06 150.006 -1.66763e-06L150.007 -1.66755e-06Z" fill="#E0004D"/>
              </svg>
              <svg xmlns="http://www.w3.org/2000/svg" class="mb-box" width="92" height="73" viewBox="0 0 92 73" fill="none">
                <path d="M81 6.34717H0.999999" stroke="#3F3636" stroke-linecap="round"/>
                <path d="M85 72.3472L85 10.3472" stroke="#3F3636"/>
                <path d="M78.0041 0.347167L91.2559 0.347168L91.2559 6.094C91.2546 6.4238 91.2507 6.75424 91.2364 7.08339C91.1619 8.78151 90.6671 10.1822 89.7752 11.2931C89.088 12.1499 88.283 12.6931 87.4176 13.0527C86.0633 13.6146 84.6818 13.7265 83.2873 13.4801C82.3967 13.323 81.534 13.0035 80.7231 12.4364C78.9232 11.1774 77.9827 9.15075 77.9996 6.22721C78.0177 2.96289 78.0034 0.347167 78.0034 0.347167L78.0041 0.347167Z" fill="#E0004D"/>
              </svg>
            </div>
            <div class="features-box-title">{{ section.settings.text1 }}</div>
            <div class="features-box-sub">{{ section.settings.text2 }}</div>
          </div>
        </div>
        <div class="features-box-four-ov">
          <div class="features-box-four-cont features-box-step">
            {%- if section.settings.image2 != blank -%}
              <img loading="lazy" class="four-img" width="{{ section.settings.image2.width }}" height="{{ section.settings.image2.height }}" {% render 'image-attributes', image: section.settings.image2 %} alt="{{ section.settings.image2.alt | escape }}" >
            {%- endif -%}
            <div class="container">
              <div class="features-box-text">
                <div class="svg-icon-box">
                  <svg xmlns="http://www.w3.org/2000/svg" class="pc-box" width="183" height="62" viewBox="0 0 183 62" fill="none">
                    <path d="M8.21094 61.6136L56.559 14.2267" stroke="white"/>
                    <path d="M73 8L183 7.99999" stroke="white"/>
                    <path d="M56.5524 15.4426L56.5525 15.4428C57.4829 16.6028 58.57 17.3372 59.7478 17.8265C61.6017 18.5957 63.4928 18.7506 65.4141 18.4112L65.4143 18.4111C66.634 18.1959 67.8055 17.7608 68.9055 16.9915C71.3275 15.2973 72.6359 12.5572 72.6123 8.46662L72.6123 8.46652C72.5993 6.11579 72.5979 3.99869 72.5997 2.46928C72.6006 1.70455 72.6024 1.0867 72.6039 0.65996L72.6046 0.500029L54.5313 0.50003L54.5313 8.27101C54.5331 8.74328 54.5387 9.21075 54.5587 9.6742L56.5524 15.4426ZM56.5524 15.4426C55.3456 13.9394 54.6621 12.0303 54.5588 9.67449L56.5524 15.4426Z" stroke="white"/>
                  </svg>
                  <svg xmlns="http://www.w3.org/2000/svg" class="mb-box" width="72" height="86" viewBox="0 0 72 86" fill="none">
                    <path d="M7 84.7349V56.7349" stroke="white" stroke-linecap="round"/>
                    <path d="M71.002 0.734863L13.002 47.7349" stroke="white"/>
                    <path d="M11.3853 54.3678L11.3852 54.368C10.7568 55.1514 10.0235 55.6471 9.22602 55.9785C7.9671 56.5009 6.68305 56.6067 5.37431 56.3754L5.37419 56.3754C4.54578 56.2292 3.75331 55.9344 3.00966 55.4144C1.37851 54.2734 0.483392 52.4237 0.499555 49.6178L0.499556 49.6177C0.508631 47.9841 0.509603 46.5129 0.508307 45.4502C0.507688 44.9434 0.506555 44.5294 0.505537 44.2349L12.7559 44.2349L12.7559 49.4807C12.7546 49.8081 12.7507 50.1303 12.7369 50.4492L11.3853 54.3678ZM11.3853 54.3678C12.2002 53.3528 12.6662 52.0592 12.7369 50.4495L11.3853 54.3678Z" stroke="white"/>
                  </svg>
                </div>
                <div class="features-box-title">{{ section.settings.text5 }}</div>
                <div class="features-box-sub">{{ section.settings.text6 }}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="features-box-two-tags"></div>
    <div class="features-box-three-tags"></div>
    <div class="features-box-three features-box-step">
      <div class="container">
        <div class="features-box-text">
          <div class="svg-icon-box">
            <svg xmlns="http://www.w3.org/2000/svg" class="pc-box" width="183" height="62" viewBox="0 0 183 62" fill="none">
              <path d="M8.21094 61.6135L56.559 14.2266" stroke="#3F3636"/>
              <path d="M73 8H183" stroke="#3F3636"/>
              <path d="M73.1058 -1.66755e-06L54.0312 0L54.0313 8.27197C54.0331 8.74667 54.0387 9.22231 54.0592 9.69608C54.1664 12.1404 54.8787 14.1565 56.1625 15.7556C57.1516 16.9889 58.3104 17.7707 59.556 18.2882C61.5054 19.0971 63.4939 19.2581 65.5011 18.9035C66.783 18.6773 68.0248 18.2175 69.192 17.4012C71.7829 15.5889 73.1365 12.6718 73.1123 8.46371C73.0862 3.76506 73.1067 -1.66763e-06 73.1067 -1.66763e-06L73.1058 -1.66755e-06Z" fill="#E0004D"/>
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-box" width="72" height="88" viewBox="0 0 72 88" fill="none">
              <path d="M7 86.6528L7 56.6528" stroke="#3F3636" stroke-linecap="round"/>
              <path d="M71 1.26514L13 48.2651" stroke="#3F3636"/>
              <path d="M0.00409698 44.2651L13.2559 44.2651L13.2559 50.012C13.2546 50.3418 13.2507 50.6722 13.2364 51.0014C13.1619 52.6995 12.6671 54.1001 11.7752 55.2111C11.088 56.0679 10.283 56.6111 9.41764 56.9706C8.06332 57.5326 6.68179 57.6445 5.28731 57.3981C4.39674 57.2409 3.53401 56.9215 2.7231 56.3544C0.923171 55.0953 -0.0172766 53.0687 -0.000436343 50.1452C0.017699 46.8809 0.00344944 44.2651 0.00344944 44.2651L0.00409698 44.2651Z" fill="#E0004D"/>
            </svg>
          </div>
          <div class="features-box-title">{{ section.settings.text3 }}</div>
          <div class="features-box-sub">{{ section.settings.text4 }}</div>
        </div>
      </div>
    </div>
    <div class="features-box-four-tags"></div>
    <div class="features-box-four">
    </div>
  </div>

</section>
<script>

  // throttle(initPosition, 100); // 根据需要调整节流限制

// 添加带有节流函数的事件监听器
 // window.addEventListener('load', function() {
      // window.addEventListener('scroll', throttleUlike(initPosition, 30));
    // })
  window.addEventListener('load', function() {
     window.addEventListener('scroll', function() {
      // initPosition()
       requestAnimationFrame(initPosition)
    });
    initPosition()
  })
    // document.addEventListener("DOMContentLoaded", function() {
    //   initPosition()
    // })
    
    function initPosition(){
      changeTextMark()
      changeProductImg()
      changeProductImgTwo()
      changeProductImgThree()
      changeProductImgFour()
    }
        
    function changeTextMark() {
      let windownHeight = window.innerHeight
      let textMark = document.querySelector('.text-mark')
      let textMarkPosition = textMark.getBoundingClientRect()
      let num = 0
      if(textMarkPosition.top>0 && textMarkPosition.top < windownHeight*0.7 ){
        num = 1 - textMarkPosition.top / (windownHeight*0.7)
      }
      if(textMarkPosition.top > windownHeight*0.7) num = 0
      if(textMarkPosition.top<=0) num = 1
      textMark.querySelector('.text-mark-txt').style='--position-num:'+ num*100 +'%'
    }
    function changeProductImg(){
      let windownHeight = window.innerHeight
      let windownWidth = window.innerWidth
      let featuresTwo = document.querySelector('.features-box-two')
      let featuresTwoTag = document.querySelector('.features-box-two-tags')
      let featuresTwoPosition = featuresTwoTag.getBoundingClientRect()
      let ratio = 0
      let opacityNum = 1
      let prozent = 0
      let rightNum =windownWidth - windownWidth * 0.253
      if(windownWidth<1920){
        rightNum =windownWidth - windownWidth * 0.223
      }
      if(windownWidth<991){
        rightNum = windownWidth * 1.523
      }
      if(featuresTwoPosition.top > 0 && featuresTwoPosition.top < windownHeight){
        ratio = windownWidth - (1 - featuresTwoPosition.top / windownHeight) * rightNum
        prozent = 1 - featuresTwoPosition.top / windownHeight
        if(featuresTwoPosition.top > windownHeight*0.05 && featuresTwoPosition.top < windownHeight - 100){
          opacityNum = (featuresTwoPosition.top - windownHeight*0.05) / (windownHeight - windownHeight*.05 - 100)
        }
      }

      if(featuresTwoPosition.top > windownHeight) {
        ratio = 0
        prozent = 0
      }
      if(featuresTwoPosition.top<=0) {
        ratio = windownWidth * 0.253
        prozent = 1
      }
      if(windownWidth<1920){
        if(featuresTwoPosition.top<=0) ratio = windownWidth * 0.223
      }
      if(windownWidth<991){
        if(featuresTwoPosition.top<=0) ratio = windownWidth - windownWidth * 1.523
      }
      
      if( featuresTwoPosition.top > windownHeight - 100) opacityNum = 1
      if(featuresTwoPosition.top < windownHeight*0.05) opacityNum = 0
      featuresTwo.querySelector('.product-img').style.right = (ratio) +'px'
      featuresTwo.style.setProperty('--img-top', prozent)
      document.querySelector('.text-mark').style.opacity = opacityNum
    }
    function changeProductImgTwo(){
      let windownHeight = window.innerHeight
      let windownWidth = window.innerWidth
      let featuresTwo = document.querySelector('.features-box-two')
      let featuresThree = document.querySelector('.features-box-three-tags')
      let productImg = featuresTwo.querySelector('.product-img')
      let featuresThreePosition = featuresThree.getBoundingClientRect()
      let ratioNum = 0
      let ratioRight = 0
      let rightCs = windownWidth * 0.253
      let rightNum = productImg.offsetWidth - windownWidth*1.09 + rightCs
      let topNum = windownHeight*0.87 + productImg.offsetTop
      
      if(windownWidth<1920){
        rightCs = windownWidth * 0.223
        rightNum = productImg.offsetWidth - windownWidth*1.22 + rightCs
      }
      
      if(windownWidth<991){
        rightCs = windownWidth - windownWidth * 1.523
        rightNum = productImg.offsetWidth - windownWidth*2.32 + rightCs
        topNum = windownHeight*0.75 + productImg.offsetTop
      }
      
      if(featuresThreePosition.top > windownHeight*0.85 && featuresThreePosition.top < windownHeight){
        ratioNum =1 - (featuresThreePosition.top - windownHeight*0.85) / (windownHeight*0.15)
      }
      if(featuresThreePosition.top > windownHeight) ratioNum = 0
      if(featuresThreePosition.top < windownHeight*0.85 && featuresThreePosition.top > windownHeight*0.75) ratioNum = 1
      if(featuresThreePosition.top < windownHeight*0.75&&featuresThreePosition.top > windownHeight*0.6){
        ratioNum =(featuresThreePosition.top - windownHeight*0.6) / (windownHeight*0.15)
      }
      
      featuresTwo.style.setProperty('--ratio-num', ratioNum)
      if(featuresThreePosition.top > windownHeight*0.75) return
      if(featuresThreePosition.top > 0 && featuresThreePosition.top < windownHeight*0.75){
        ratioRight = 1 - featuresThreePosition.top / (windownHeight*0.75)
      }
      
      if(featuresThreePosition.top < 0) ratioRight = 1
      if(featuresThreePosition.top > windownHeight*0.75) ratioRight = 0
      productImg.style.right = (rightCs - rightNum*ratioRight) +'px'
      productImg.style.transform = 'translateY(-'+ topNum*ratioRight +'px)'
      
      if(featuresThreePosition.top < 0){
        featuresTwo.querySelector('.four-img').style.right = (rightCs - rightNum*ratioRight) +'px'
        featuresTwo.querySelector('.four-img').style.transform = 'translateY(-'+ topNum*ratioRight +'px)'
      }
    }

    function changeProductImgThree(){
      let windownHeight = window.innerHeight
      let windownWidth = window.innerWidth
      let featuresTwo = document.querySelector('.features-box-two')
      let featuresFour = document.querySelector('.features-box-four')
      let featuresThree = document.querySelector('.features-box-three')
      let featuresFourPosition = featuresFour.getBoundingClientRect()
      let ratioNum = 0
      let ratioNum1 = 0
      if(featuresFourPosition.top > windownHeight*0.8 && featuresFourPosition.top < windownHeight){
        ratioNum =1 - (featuresFourPosition.top - windownHeight*0.8) / (windownHeight*0.2)
      }
      if(featuresFourPosition.top > windownHeight) ratioNum = 0
      if(featuresFourPosition.top < windownHeight*0.8) ratioNum = 1
      
      if(windownWidth<991){
        if(featuresFourPosition.top > windownHeight && featuresFourPosition.top < windownHeight*1.2){
          ratioNum =1 - (featuresFourPosition.top - windownHeight) / (windownHeight*0.2)
        }
        if(featuresFourPosition.top > windownHeight*1.2) ratioNum = 0
        if(featuresFourPosition.top < windownHeight) ratioNum = 1
      }
      
      featuresThree.style='--ratio-num:' + ratioNum
      
      if(featuresFourPosition.top > windownHeight*0.3 && featuresFourPosition.top < windownHeight*0.5){
        ratioNum1 =1 - (featuresFourPosition.top - windownHeight*0.3) / (windownHeight*0.2)
      }
      if(featuresFourPosition.top > windownHeight*0.6) ratioNum1 = 0
      if(featuresFourPosition.top < windownHeight*0.4) ratioNum1 = 1
      featuresTwo.querySelector('.features-box-four-cont').style='--ratio-num:' + ratioNum1
      
      let fadeNum = 0
      if(featuresFourPosition.top < 0 && featuresFourPosition.top > -windownHeight*.4){
        fadeNum = ( 0- featuresFourPosition.top) / (windownHeight*0.4)
        featuresThree.style.opacity = 0
        featuresTwo.querySelector('.product-img').style.opacity = 0
      }
      if(featuresFourPosition.top >= 0){
        featuresThree.style.opacity = 1
        featuresTwo.querySelector('.product-img').style.opacity = 1
      }
      
      if(featuresFourPosition.top > 0) fadeNum = 0
      // if(featuresFourPosition.bottom <= windownHeight) fadeNum = 1
      if(featuresFourPosition.top <= -windownHeight*.4){
        fadeNum = 1
      }
      document.querySelector('.features-box').style.setProperty('--style-num', fadeNum)
      // document.querySelector('.next-box .next-box-cont').style='--style-num:' + fadeNum
      // changNextLocation()
    }
    
    function changeProductImgFour(){
      let windownHeight = window.innerHeight
      let windownWidth = window.innerWidth
      let featuresFourOv = document.querySelector('.features-box-four-tags')
      let featuresFourOvPosition = featuresFourOv.getBoundingClientRect()
      let ratioNum = 0
      if(featuresFourOvPosition.top<=windownHeight && featuresFourOvPosition.top>=0){
        ratioNum = 1 - featuresFourOvPosition.top/windownHeight
      }
      if(featuresFourOvPosition.top > windownHeight) ratioNum = 0
      if(featuresFourOvPosition.top <= 0 ) ratioNum = 1
      document.querySelector('.features-box-four-ov').style='--height-num:' + ratioNum
      document.querySelector('.features-box-three').style.setProperty('--height-num',ratioNum)
    }
    
    function changNextLocation(){
      if(!document.querySelector('.next-box')) return
      let $p = document.querySelector('.next-box')
      let $pPosition = $p.getBoundingClientRect()
      let winHeight = window.innerHeight
      let height = $p.offsetHeight
      let marginTop = - winHeight*1.5
      $p.style = 'margin-top:'+marginTop+'px;height:'+ winHeight*1.8 +'px'
    }
  </script>
{% schema %}
{
  "name": "features-box1",
  "settings": [
    {
      "type": "header",
      "content": "Module 1"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Background Image"
    },
    {
      "type": "text",
      "id": "text",
      "label": "Text"
    },
    {
      "type": "header",
      "content": "Module 2"
    },
    {
      "type": "image_picker",
      "id": "image1",
      "label": "Product Image"
    },
    {
      "type": "text",
      "id": "text1",
      "label": "Text"
    },
    {
      "type": "text",
      "id": "text2",
      "label": "Text"
    },
    {
      "type": "header",
      "content": "Module 3"
    },
    {
      "type": "text",
      "id": "text3",
      "label": "Text"
    },
    {
      "type": "text",
      "id": "text4",
      "label": "Text"
    },
    {
      "type": "header",
      "content": "Module 4"
    },
    {
      "type": "image_picker",
      "id": "image2",
      "label": "Product Image"
    },
    {
      "type": "text",
      "id": "text5",
      "label": "Text"
    },
    {
      "type": "text",
      "id": "text6",
      "label": "Text"
    }
  ],
  "blocks": [
  ],
  "presets": [
    {
      "name": "features-box1"
    }
  ]
}
{% endschema %}